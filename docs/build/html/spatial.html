
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>spatial module &#8212; ws3 0.1a1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="opt module" href="opt.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="opt.html" title="opt module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ws3 0.1a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" accesskey="U"><code class="docutils literal"><span class="pre">ws3</span></code> Package Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="spatial-module">
<h1><code class="docutils literal"><span class="pre">spatial</span></code> module<a class="headerlink" href="#spatial-module" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-spatial"></span><dl class="class">
<dt id="spatial.ForestRaster">
<em class="property">class </em><code class="descclassname">spatial.</code><code class="descname">ForestRaster</code><span class="sig-paren">(</span><em>hdt_map</em>, <em>hdt_func</em>, <em>src_path</em>, <em>snk_path</em>, <em>acodes</em>, <em>horizon</em>, <em>base_year</em>, <em>period_length=1</em>, <em>tif_compress='lzw'</em>, <em>tif_dtype='uint8'</em>, <em>piggyback_acodes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatial.html#ForestRaster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatial.ForestRaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The <code class="docutils literal"><span class="pre">ForestRaster</span></code> class can be used to allocate an aspatial disturbance schedule (for example, an optimal solution to a wood supply problem generated by an instance of the <code class="docutils literal"><span class="pre">forest.ForestModel</span></code> class) to a rasterized representation of the forest inventory.</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param hdt_map:</th><td class="field-body">A dictionary mapping hash values to development types. The rasterized forest inventory is stored in a 2-layer GeoTIFF file. Pixel values for the first layer represent the <em>theme</em> values (i.e., the stratification variables used to stratify the forest inventory into development types). The value of the <code class="docutils literal"><span class="pre">hdt_map</span></code> parameter is used to <em>expand</em> hash value back into a tuple of theme values.</td>
</tr>
<tr class="field-even field"><th class="field-name">type hdt_map:</th><td class="field-body">dict</td>
</tr>
<tr class="field-odd field"><th class="field-name">param hdt_func:</th><td class="field-body">A function that accepts a tuple of theme values, and returns a hash value. Must be the same function used to encode the rasterized forest inventory (see documentation of the <code class="docutils literal"><span class="pre">hdt_map</span></code> parameter, above).</td>
</tr>
<tr class="field-even field"><th class="field-name">param src_path:</th><td class="field-body">Filesystem path pointing to the input GeoTIFF file (i.e., the rasterized forest inventory). Note that this file will be used as a model for the output GeoTIFF files (i.e., pixel matrix height and width, coordinate reference system, compression parameters, etc.).</td>
</tr>
<tr class="field-odd field"><th class="field-name">param snk_path:</th><td class="field-body">Filesystem path pointing to a directory where the output GeoTIFF files. The output GeoTIFF files are automatically created inside the class constructor method (one GeoTIFF file for each combination of disturbance type and year. If the disturbance schedule is from a <code class="docutils literal"><span class="pre">ForestModel</span></code> instance that uses multi-year periods, then the <code class="docutils literal"><span class="pre">ForestRaster</span></code> class automatically disaggregates the periodic solution into annual time steps.</td>
</tr>
<tr class="field-even field"><th class="field-name">param acodes:</th><td class="field-body">List of disturbance codes.</td>
</tr>
<tr class="field-odd field"><th class="field-name">param horizon:</th><td class="field-body">Length of planning horizon (expressed as a number of periods).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param base_year:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Base year for numbering of annual time steps.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param period_length:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Length of planning period in the <code class="docutils literal"><span class="pre">ForestModel</span></code> instance used to generate the disturbance schedule.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param tiff_compress:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">GeoTIFF compression mode (uses LZW lossless compression by default).</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">param tif_dtype:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Data type for output GeoTIFF files (defaults to <code class="docutils literal"><span class="pre">rasterio.uint8</span></code>, i.e., an 8-byte unsigned integer).</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">param piggyback_acodes:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">A dictionary of list of tuples, describing piggyback disturbance parameters. By <em>piggyback</em> disturbance, we mean a disturbance that was not explicitly scheduled by the <code class="docutils literal"><span class="pre">ForestModel</span></code> instance, but rather is modelled as a (randomly-selected) subset of one of the explicitly modelled disturbances.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>For example, if we want to model that 85% of pixels disturbed using the <em>clearcut</em> disturbance are disturbed by a piggybacked <em>slashburn</em> disturbance, we would pass</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">piggyback_acodes={'clearcut':[('slashburn',</span> <span class="pre">0.85)]}</span></code>.</div></blockquote>
<dl class="method">
<dt id="spatial.ForestRaster.allocate_schedule">
<code class="descname">allocate_schedule</code><span class="sig-paren">(</span><em>forestmodel</em>, <em>da=0</em>, <em>fudge=1.0</em>, <em>mask=None</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatial.html#ForestRaster.allocate_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatial.ForestRaster.allocate_schedule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="spatial.ForestRaster.cleanup">
<code class="descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatial.html#ForestRaster.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatial.ForestRaster.cleanup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="spatial.ForestRaster.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatial.html#ForestRaster.commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatial.ForestRaster.commit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="spatial.ForestRaster.grow">
<code class="descname">grow</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatial.html#ForestRaster.grow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatial.ForestRaster.grow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="spatial.ForestRaster.transition_cells_random">
<code class="descname">transition_cells_random</code><span class="sig-paren">(</span><em>from_dtk</em>, <em>from_age</em>, <em>to_dtk</em>, <em>to_age</em>, <em>tarea</em>, <em>acode</em>, <em>dy</em>, <em>da=0</em>, <em>fudge=1.0</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatial.html#ForestRaster.transition_cells_random"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatial.ForestRaster.transition_cells_random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="opt.html"
                        title="previous chapter">opt module</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="opt.html" title="opt module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ws3 0.1a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" ><code class="docutils literal"><span class="pre">ws3</span></code> Package Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Gregory Paradis.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>